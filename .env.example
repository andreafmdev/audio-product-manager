# ═══════════════════════════════════════════════════════════════════════════════
# NestJS DDD DevOps - Environment Variables Configuration
# ═══════════════════════════════════════════════════════════════════════════════
# 
# INSTRUCTIONS:
# 1. Copy this file: cp .env.example .env
# 2. Modify the values according to your environment
# 3. DO NOT commit the .env file to the repository (it's already in .gitignore)
#
# The file is automatically loaded based on ENVIRONMENT or NODE_ENV:
# - .env.local (if ENVIRONMENT=local)
# - .env.qual (if ENVIRONMENT=qual)
# - .env.reg (if ENVIRONMENT=reg)
# - .env.prod (if ENVIRONMENT=prod)
# - .env (fallback if no specific file found)
# ═══════════════════════════════════════════════════════════════════════════════

# ═══════════════════════════════════════════════════════════════════════════════
# APPLICATION CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════════

# Node.js environment
# Possible values: 'development', 'test', 'production'
# Default: 'development'
NODE_ENV=development

# Application environment (overrides NODE_ENV for .env file loading)
# Possible values: 'local', 'qual', 'reg', 'prod'
# Default: 'local' (if not specified, uses NODE_ENV)
# Note: 'qual' = Quality Assurance, 'reg' = Regression, 'prod' = Production
ENVIRONMENT=local

# Port on which the NestJS application listens for HTTP requests
# Default: 3000
# Note: Make sure the port is not already in use
PORT=3000

# ═══════════════════════════════════════════════════════════════════════════════
# DATABASE CONFIGURATION (PostgreSQL)
# ═══════════════════════════════════════════════════════════════════════════════

# PostgreSQL database host
# For local development with Docker: '127.0.0.1' or 'localhost'
# For Docker Compose: use the service name (e.g., 'postgresql-dev')
# For production: use the database server hostname or IP
# Default: '127.0.0.1'
DATABASE_HOST=127.0.0.1

# PostgreSQL database port
# For local development with Docker Compose:
#   - Dev: 15432 (postgresql-dev)
#   - Test: 25432 (postgresql-test)
#   - Qual: 35432 (postgresql-qual)
#   - Prod: 5432 (standard PostgreSQL)
# Default: 15432 (development)
DATABASE_PORT=15432

# PostgreSQL database name
# For local development with Docker Compose:
#   - Dev: 'db-dev'
#   - Test: 'db-test-e2e'
#   - Qual: 'db-qual'
#   - Prod: 'db-prod' (or your production database name)
# Default: 'db-dev'
DATABASE_NAME=db-dev

# Username for PostgreSQL database connection
# Default: 'postgres'
DATABASE_USER=postgres

# Password for PostgreSQL database connection
# IMPORTANT: Change this password in production!
# Default: 'postgres' (development only)
DATABASE_PASSWORD=postgres

# ═══════════════════════════════════════════════════════════════════════════════
# AUTHENTICATION PROVIDER CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════════

# Authentication provider to use
# Possible values: 'keycloak', 'supabase'
# Default: 'keycloak'
# Note: Only the selected provider's variables are required
AUTH_PROVIDER=keycloak

# ═══════════════════════════════════════════════════════════════════════════════
# KEYCLOAK CONFIGURATION (Required if AUTH_PROVIDER=keycloak)
# ═══════════════════════════════════════════════════════════════════════════════
# 
# To configure Keycloak:
# 1. Create a Realm in Keycloak
# 2. Create a Client with:
#    - Client authentication: ON
#    - Standard flow: ENABLED
#    - Direct access grants: ENABLED
# 3. Copy the Client Secret from the Credentials tab
# 4. Configure Valid redirect URIs: http://localhost:3000/*
#
# Documentation: https://www.keycloak.org/docs/latest/securing_apps/

# Keycloak server URL (without trailing slash)
# Example: 'https://keycloak.example.com' or 'http://localhost:8080'
# IMPORTANT: Do not include '/auth' or '/realms' in the URL
KEYCLOAK_AUTH_SERVER_URL=https://your-keycloak-instance.com

# Keycloak Realm name
# A Realm is an isolated namespace in Keycloak containing users, clients, roles, etc.
# Example: 'my-realm' or 'master'
KEYCLOAK_REALM=your-realm-name

# Client ID configured in Keycloak
# The Client represents the application that authenticates with Keycloak
# Example: 'nestjs-app' or 'my-client'
KEYCLOAK_CLIENT_ID=your-client-id

# Client Secret of the Keycloak Client
# IMPORTANT: Keep this value secret! Do not commit it to the repository.
# You can find it in the Client's "Credentials" tab in Keycloak
KEYCLOAK_CLIENT_SECRET=your-client-secret-here

# ═══════════════════════════════════════════════════════════════════════════════
# SUPABASE CONFIGURATION (Required if AUTH_PROVIDER=supabase)
# ═══════════════════════════════════════════════════════════════════════════════
#
# To configure Supabase:
# 1. Create a project at https://supabase.com
# 2. Go to Settings > API
# 3. Copy:
#    - Project URL (SUPABASE_URL)
#    - anon/public key (SUPABASE_ANON_KEY)
#    - JWT Secret (SUPABASE_JWT_SECRET) from Settings > API > JWT Settings
#
# Documentation: https://supabase.com/docs/guides/auth

# Supabase project URL
# Format: 'https://xxxxxxxxxxxxx.supabase.co'
# You can find it in Settings > API > Project URL
SUPABASE_URL=https://your-project.supabase.co

# Supabase public (anon) key
# This key is safe to expose publicly (it's designed for client-side use)
# You can find it in Settings > API > Project API keys > anon public
SUPABASE_ANON_KEY=your-supabase-anon-key-here

# Supabase JWT Secret for token verification
# IMPORTANT: Keep this value secret! Do not commit it to the repository.
# You can find it in Settings > API > JWT Settings > JWT Secret
SUPABASE_JWT_SECRET=your-supabase-jwt-secret-here

# ═══════════════════════════════════════════════════════════════════════════════
# CONFIGURATION EXAMPLES FOR DIFFERENT ENVIRONMENTS
# ═══════════════════════════════════════════════════════════════════════════════
#
# LOCAL DEVELOPMENT (ENVIRONMENT=local):
# - DATABASE_HOST=127.0.0.1
# - DATABASE_PORT=15432
# - DATABASE_NAME=db-dev
# - AUTH_PROVIDER=keycloak (or supabase)
#
# QUALITY ASSURANCE (ENVIRONMENT=qual):
# - DATABASE_HOST=qual-db.example.com
# - DATABASE_PORT=5432
# - DATABASE_NAME=db-qual
# - AUTH_PROVIDER=keycloak
# - KEYCLOAK_AUTH_SERVER_URL=https://keycloak-qual.example.com
#
# PRODUCTION (ENVIRONMENT=prod):
# - DATABASE_HOST=prod-db.example.com
# - DATABASE_PORT=5432
# - DATABASE_NAME=db-prod
# - AUTH_PROVIDER=keycloak
# - KEYCLOAK_AUTH_SERVER_URL=https://keycloak-prod.example.com
# - IMPORTANT: Use strong and secure passwords in production!
# ═══════════════════════════════════════════════════════════════════════════════